---
format: gfm
---


```{r}
devtools::install()
```

For local development run this in the `r` directory:

```{r}
devtools::load_all()
```

```{r}
library(dplyr)
```

Basic test

```{r}
x = sf::read_sf("data-raw/geojson/princes_street_minimal_x_1.geojson")
x = x |> sf::st_transform("EPSG:27700")
y = sf::read_sf("data-raw/geojson/princes_street_minimal.geojson")
y = y |> sf::st_transform("EPSG:27700")
```

```{r}
bind_rows(
  princes_street_minimal |>
    transmute(value = as.character(value)),
  princes_street_minimal_x_1 |>
    transmute(value = "x")
) |>
  plot(lwd = 5)
```


```{r}
x_joined_df = rnet_match(x, y, dist_tolerance = 20, slope_tolerance = 0.1, trees = "xy")
x_aggregated_x = x_joined_df |>
  group_by(j) |>
  mutate(ij = y$value * shared_len) |>
  group_by(j) |>
  summarise(value = sum(ij))

```

```{r}
```